
{% extends "base.html" %}

{% block content %}
<h2 class="mb-4">All Employees</h2>

{% for user in users %}
<div class="employee-card card shadow-sm mb-3 ">
    <div class="hero-gradient5 shadow-soft employee-name p-3">
        <h5>{{ user.name }}</h5>

        <p class="employee-role"><strong>Role:</strong> {{ user.role or "Not provided" }}</p>

        <p class="employee-submitted">
            Submitted on {{ user.created_at.strftime("%Y-%m-%d %H:%M") }}
        </p>

        <!-- DELETE FORM (Correct Nesting) -->
        <form action="{{ url_for('delete_user', user_id=user.id) }}"
              method="POST"
              onsubmit="return confirm('Are you sure you want to delete this employee?');">

            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

            <div class="d-flex justify-content-end">
                <button class="btn btn-danger btn-sm">Delete</button>
            </div>
        </form>

    </div>
</div>
{% else %}
<p>No users found.</p>
{% endfor %}

<a href="/" class="btn btn-secondary mt-3">Back</a>
{% endblock %}
``
{% block scripts %}
    {{ super() }}  <!-- keeps Bootstrap + Handsontable from base.html -->
{% endblock %}




